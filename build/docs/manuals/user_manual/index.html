<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<title data-rh="true">License | Encryptonize DB</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="localhost:3000/docs/manuals/user_manual"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="License | Encryptonize DB"><meta data-rh="true" name="description" content="Copyright 2020-2022 CYBERCRYPT"><meta data-rh="true" property="og:description" content="Copyright 2020-2022 CYBERCRYPT"><link data-rh="true" rel="icon" href="/img/rook-favicon-3.ico"><link data-rh="true" rel="canonical" href="localhost:3000/docs/manuals/user_manual"><link data-rh="true" rel="alternate" href="localhost:3000/docs/manuals/user_manual" hreflang="en"><link data-rh="true" rel="alternate" href="localhost:3000/docs/manuals/user_manual" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.1254e51e.css">
<link rel="preload" href="/assets/js/runtime~main.877ced0f.js" as="script">
<link rel="preload" href="/assets/js/main.e03ae577.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/rook-favicon-3.png" alt="‚ôñ" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/rook-favicon-3-white.png" alt="‚ôñ" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Encryptonize Db</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/API/Overview">Introduction</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/manuals/user_manual">Getting Started</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/tutorial-basics/create-a-page">Code Samples</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/API/Functions">API reference</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/cyber-crypt-com/encryptonize-core" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="Switch between dark and light mode (currently light mode)"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/tutorial-basics/create-a-page">Tutorial - Basics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/API/Authorization">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/Dependencies/overview">Dependencies</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/docker-hub/">docker-hub</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/manuals/user_manual">manuals</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/manuals/user_manual">License</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">üè†</a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_e5ie">manuals</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/manuals/user_manual">License</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>License</h1><p>Copyright 2020-2022 CYBERCRYPT</p><p>Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">http://www.apache.org/licenses/LICENSE-2.0</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">üìÅ @site</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ‚îÇ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ‚îú‚îÄ‚îÄüìÅdocs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ‚îÇ   ‚îî‚îÄ‚îÄüìÅüìÑ(folder/.md/.mdx structure of documentation)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ‚îÇ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ‚îú‚îÄ‚îÄsrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ‚îÇ   ‚îî‚îÄ‚îÄ üìÅüìÑcomponents (custom react components to import in .mdx)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ‚îÇ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ‚îú‚îÄ‚îÄüìÅversioned_# (old documentation ver)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ‚îî‚îÄ‚îÄüìÑversions.json (old documentation ver)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">/src/components/HelloCodeTitle.js</div><div class="codeBlockContent_wNvx jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HelloCodeTitle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Hello, </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LplD tabs__item--active">JS</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LplD">C#</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LplD">Haskell</li></ul><div class="margin-vert--md"><div role="tabpanel"><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT hljs language-js theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="hljs-built_in">modelBuilder.where(b =&gt; b._tenantId == _tenantId);</span></code></pre></div><div role="tabpanel" hidden=""><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT hlcsharp language-csharp theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="hlcsharp-built_in">modelBuilder.Entity&lt;Blog&gt;().HasQueryFilter(b =&gt; EF.Property&lt;string&gt;(b, &quot;_tenantId&quot;) == _tenantId);</span></code></pre></div><div role="tabpanel" hidden="">This is a banana üçå</div></div></div><h1>Overview</h1><p>This user manual is updated to correspond to version 3.2.0 of the API.</p><p>This document will provide a quick introduction on how to use the Encryptonize service and introduce
essential concepts and terminology. For a detailed description of the gRPC API, see <a href="/docs/API/Authorization">the
specification</a>.</p><ol><li><a href="#terminology">Terminology</a></li><li><a href="#encryptonize-configs">Encryptonize configs</a></li><li><a href="#authentication">Authentication</a></li><li><a href="#users-and-groups">Users and Groups</a><ol><li><a href="#managing-users">Managing Users</a><ol><li><a href="#bootstrapping-users">Bootstrapping users</a></li><li><a href="#generating-users-through-the-api">Generating users through the API</a></li><li><a href="#user-login">User Login</a></li><li><a href="#remove-user">Remove User</a></li></ol></li><li><a href="#managing-groups">Managing Groups</a><ol><li><a href="#creating-groups">Creating groups</a></li><li><a href="#adding-and-removing-users">Adding and removing users</a></li></ol></li></ol></li><li><a href="#storage">Storage</a><ol><li><a href="#storing-data">Storing data</a></li><li><a href="#retrieving-data">Retrieving data</a></li><li><a href="#updating-data">Updating data</a></li><li><a href="#deleting-data">Deleting data</a></li></ol></li><li><a href="#storage-less-encryption">Storage-less encryption</a><ol><li><a href="#encryption">Encryption</a></li><li><a href="#decryption">Decryption</a></li></ol></li><li><a href="#permissions">Permissions</a><ol><li><a href="#get-permissions-of-an-object">Get permissions of an object</a></li><li><a href="#add-permissions-to-an-object">Add permissions to an object</a></li><li><a href="#get-version-information">Remove permissions from an object</a></li></ol></li><li><a href="#version">Version</a></li></ol><h1>Terminology</h1><p>Terminology specific to the Encryptonize service is introduced when needed. Every term will be
marked in <strong>bold</strong>. Value types are called by their protobuf name. For an overview of these names
translated to supported languages see this
<a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener noreferrer">list</a>.</p><h1>Encryptonize configs</h1><p>By default the Encryption Service reads its configuration from the TOML file <code>config.toml</code>. This
behaviour can be modified by setting the environment variable <code>ECTNZ_CONFIGFILE</code>. The supported file
formats are TOML, YAML, and JSON.</p><p>All configuration options are documented in the example configuration
<a href="/encryption-service/scripts/dev-config.toml"><code>encryption-service/scripts/dev-config.toml</code></a>.
All configuration options can be overwritten by a corresponding environment variable. For example,
the URL for the object storage can be overwritten by setting <code>ECTNZ_OBJECTSTORAGE_URL</code>.</p><p>The configuration is divided in 4 sections. Each section is briefly described below.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="keys-configs">Keys configs<a class="hash-link" href="#keys-configs" title="Direct link to heading">‚Äã</a></h2><p>Keys are used by Encryptonize to secure confidentiality and integrity of the data. Therefore make sure
that these are generated securely and randomly. The data cannot be accessed without the keys, so make
sure to have a proper backup. </p><h2 class="anchor anchorWithStickyNavbar_mojV" id="auth-storage-configs">Auth storage configs<a class="hash-link" href="#auth-storage-configs" title="Direct link to heading">‚Äã</a></h2><p>Auth storage contains user authorization data. Auth storage can be any database which supports Postgresql.
Encryptonize needs the host, port and credentials of the database in order to establish connections. </p><h2 class="anchor anchorWithStickyNavbar_mojV" id="feature-flags-configs">Feature flags configs<a class="hash-link" href="#feature-flags-configs" title="Direct link to heading">‚Äã</a></h2><p>These flags can be used to toggle different features of Encryptonize.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="object-storage-configs">Object storage configs<a class="hash-link" href="#object-storage-configs" title="Direct link to heading">‚Äã</a></h2><p>Object storage contains all the encrypted data. Anything that supports the <a href="https://docs.aws.amazon.com/s3/index.html" target="_blank" rel="noopener noreferrer">S3 protocol</a>
can be used as object storage. Encryptonize needs to be configured with the URL, credentials and
certificate for the object storage.</p><h1>Authentication</h1><p>All authentication on the Encryptonize service is done via an <code>authorization</code> pair in gRPC metadata.
It should contain the user access token and be in the form <code>bearer &lt;user access token&gt;</code>.
A correct authentication metadata query could look like this:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;authorization&quot;: &quot;bearer AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This token is obtained upon user login as described in the <a href="#user-login">User Login section</a>.
Note that the access token is short lived (1 hour).</p><h1>Users and Groups</h1><p>A <strong>user</strong> is an authentication entity in the encryption server, and is only represented by a user
ID. The user ID is used to identify a single user. Each user has a password which can be used to
obtain an access token for authentication and authorization.</p><p>A <strong>group</strong> is an authorization entity on the encryption server, and is only represented by a group
ID. The group ID is used to identify one or more users who are members of the group. A user is
automatically a member of a group with the same group ID as the user&#x27;s user ID. A group has a set of
<strong>scopes</strong> which determine what endpoints its users are authorized to access. A user has to be a
member of at least one group with the required scope to access an endpoint. For a description of the
scopes, see the <a href="/docs/API/Authorization">API documentation</a>.</p><p>An <strong>object</strong> is a cryptographically signed package containing the stored ciphertext and the
associated data. A user can share stored data with other users/groups by modifying the permissions
on an object. Instructions on how to share data between users/groups can be found in the section on
<a href="#permissions"><em>Permissions</em></a>. The user that creates an object automatically has permission to
acccess that object, and any user/group that can access an object can modify the permissions.</p><p>It should be noted that while the access tokens and passwords should be kept secret, user IDs can be
considered public information and safely shared between parties.</p><p>All IDs are of the format version 4 UUID (<a href="https://tools.ietf.org/html/rfc4122" target="_blank" rel="noopener noreferrer">RFC 4122</a> section 4.4).</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="managing-users">Managing Users<a class="hash-link" href="#managing-users" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="bootstrapping-users">Bootstrapping users<a class="hash-link" href="#bootstrapping-users" title="Direct link to heading">‚Äã</a></h3><p>To bootstrap the Encryptonize service with an initial user, once the service has been started,
execute <code>./encryption-service create-user &lt;scopes&gt;</code>.  Here, <code>&lt;scopes&gt;</code> is a string describing the
scopes the user&#x27;s group should have. Each scope is mapped to a character as described in the table
below. The scopes are described in further detail in the <a href="/docs/API/Authorization">API documentation</a>.
E.g., to create a user with <code>READ</code> and <code>CREATE</code> scopes, call <code>./encryption-service create-user rc</code>.</p><table><thead><tr><th>Scope</th><th>Character</th></tr></thead><tbody><tr><td><code>READ</code></td><td><code>r</code></td></tr><tr><td><code>CREATE</code></td><td><code>c</code></td></tr><tr><td><code>UPDATE</code></td><td><code>u</code></td></tr><tr><td><code>DELETE</code></td><td><code>d</code></td></tr><tr><td><code>INDEX</code></td><td><code>i</code></td></tr><tr><td><code>OBJECTPERMISSIONS</code></td><td><code>o</code></td></tr><tr><td><code>USERMANAGEMENT</code></td><td><code>m</code></td></tr></tbody></table><p>Note that users are only valid for other Encryption Services that use the same key material.
Information on bootstrapping in Docker and Kubernetes environments is provided in the following
sections.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="docker-example">Docker example<a class="hash-link" href="#docker-example" title="Direct link to heading">‚Äã</a></h4><p>If using docker run:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">docker exec &lt;CONTAINER ID&gt; ./encryption-service create-user &lt;scopes&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="kubernetes-example">Kubernetes example<a class="hash-link" href="#kubernetes-example" title="Direct link to heading">‚Äã</a></h4><p>If using kubernetes with kubectl run:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl -n encryptonize exec deployment/encryptonize -- /encryption-service create-user &lt;scopes&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>For more info on user management in Kubernetes, see the <a href="/kubernetes/README.md">Encryptonize Kubernetes README</a>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="creating-users-through-the-api">Creating users through the API<a class="hash-link" href="#creating-users-through-the-api" title="Direct link to heading">‚Äã</a></h3><p>To create a user through the API, you need to call the <code>authn.Encryptonize.CreateUser</code> endpoint. The
request should contain an attribute named <code>scopes</code> which enumerates all the scopes the user&#x27;s
initial group should have. Users can only be created by a user with the <code>USERMANAGEMENT</code> scope.</p><p>Once a user has been created, a new <code>user_id</code> and <code>password</code> will be returned from the call. Note
that a group with the requested scopes and an ID equal to the <code>user_id</code> is automatically created.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="user-login">User login<a class="hash-link" href="#user-login" title="Direct link to heading">‚Äã</a></h3><p>When a user is created, you get the User ID and the password. You can use this information to obtain
the short-lived access token, which is necessary for authentication towards the API. You can login
by calling the <code>authn.Encryptonize.LoginUser</code> endpoint. Provide the User ID and the password in your
request object.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="remove-user">Remove user<a class="hash-link" href="#remove-user" title="Direct link to heading">‚Äã</a></h3><p>To remove a user, you need to call the <code>authn.Encryptonize.RemoveUser</code> endpoint. This endpoint
requires the <code>USERMANAGEMENT</code> scope. The request must contain the <code>user_id</code> of the user to be
removed. If the request was successful, you will receive an empty response.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="managing-groups">Managing Groups<a class="hash-link" href="#managing-groups" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="creating-groups">Creating groups<a class="hash-link" href="#creating-groups" title="Direct link to heading">‚Äã</a></h3><p>To create a group through the API, you need to call the <code>authn.Encryptonize.CreateGroup</code> endpoint.
The request should contain an attribute named <code>scopes</code> which enumerates all the scopes the user&#x27;s
initial group should have. Groups can only be created by a user with the <code>USERMANAGEMENT</code> scope.
Once a group has been created, a new <code>group_id</code> will be returned from the call.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="adding-and-removing-users">Adding and removing users<a class="hash-link" href="#adding-and-removing-users" title="Direct link to heading">‚Äã</a></h3><p>In order to modify the members of a group, you need to call the <code>authn.Encryptonize.AddUserToGroup</code>
and <code>authn.Encryptonize.RemoveUserFromGroup</code> endpoints. In both cases the request should contain the
<code>group_id</code> of the group in question and the <code>user_id</code> of the user to be added/removed.</p><h1>Storage</h1><p>You can let Encryptonize store your encrypted data through the <code>storage.Encryptonize</code> API. In the
following, we provide a short description of the exposed endpoints.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="storing-data">Storing data<a class="hash-link" href="#storing-data" title="Direct link to heading">‚Äã</a></h2><p>To store data through the API, you need to call the <code>storage.Encryptonize.Store</code> endpoint. To access
this endpoint the user must have the <code>CREATE</code> scope. The request should contain two attributes named
<code>plaintext</code> and <code>associated_data</code>.</p><p>The <code>plaintext</code> is the data to be encrypted and stored. The <code>associated_data</code> is metadata attached
to the plaintext. The <code>associated_data</code> will not be encrypted, but it will be cryptographically
bound to the ciphertext, ensuring integrity and authenticity. The <code>associated_data</code> can be used for
indexing or other purposes.</p><p>The <code>object_id</code> will be returned from the operation. This value should be kept safe as it will be
used to retrieve the object again from the service.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="retrieving-data">Retrieving data<a class="hash-link" href="#retrieving-data" title="Direct link to heading">‚Äã</a></h2><p>To retrieve data through the API, you need to call the <code>storage.Encryptonize.Retrieve</code> endpoint. To
access this endpoint the user must have the <code>READ</code> scope. The operations takes the <code>object_id</code> of
the object to be retrieved. If the operation is successful, the object is returned in decrypted
format along with any associated data.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="updating-data">Updating data<a class="hash-link" href="#updating-data" title="Direct link to heading">‚Äã</a></h2><p>To update an existing object, you need to call the <code>storage.EncryptonizeUpdate</code> endpoint. To access
this endpoint, the user must have the <code>UPDATE</code> scope. The request must contain the updated
<code>plaintext</code>, the updated <code>associated_data</code> and the <code>object_id</code> of the object that needs to be
updated. On a succesful request, the response will be empty. Note that concurrent updates/deletes of
the same objects might lead to race conditions and is not safe.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="deleting-data">Deleting data<a class="hash-link" href="#deleting-data" title="Direct link to heading">‚Äã</a></h2><p>To delete an existing object, you need to call the <code>storage.Encryptonize.Delete</code> endpoint. To access
this endopoint, the user must have the <code>DELETE</code> scope. The request must contain the <code>object_id</code> of
the object which should be deleted. Note that concurrent updates/deletes of the same objects might
lead to race conditions and is not safe.</p><h1>Storage-less encryption</h1><p>The Encryptonize API allows to bypass the storage and instead return the encrypted packages back to
the user. This might be useful if you wish to manage the encrypted data yourself.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="encryption">Encryption<a class="hash-link" href="#encryption" title="Direct link to heading">‚Äã</a></h2><p>You can encrypt an object and get the encrypted package back using the <code>enc.Encryptonize.Encrypt
endpoint</code>. The caller needs the <code>CREATE</code> scope in order to use this endpoint. Similar to the <code>Store</code>
endpoint, you need to provide the <code>plaintext</code> and the <code>associated_data</code>. The response of this call
will contain the <code>ciphertext</code>, the <code>associated_data</code> and the <code>object_id</code>. Note that the
<code>associated_data</code> is not encrypted.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="decryption">Decryption<a class="hash-link" href="#decryption" title="Direct link to heading">‚Äã</a></h2><p>To decrypt an object, you need to call the <code>enc.Encryptonize.Decrypt</code> endpoint and provide the
<code>ciphertext</code>, <code>associated_data</code> and the <code>object_id</code> in the request. This endpoint requires the
<code>READ</code> scope. If you are authenticated towards the API and authorized to read the object, the
response will contain the <code>plaintext</code> and the <code>associated_data</code>.</p><h1>Permissions</h1><p>Access to an object is shared through the concept of object permissions.</p><p>Every object has a list associated with it with the group IDs of the groups who are able to access
and modify the object. In order to modify the permission list, the user must be in a group that has
access to the object (i.e. is in the permission list of the object).</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="get-permissions-of-an-object">Get permissions of an object<a class="hash-link" href="#get-permissions-of-an-object" title="Direct link to heading">‚Äã</a></h2><p>To get the permission list of an object, you need to call the <code>authz.Encryptonize.GetPermissions</code>
endpoint. To access this endpoint the <code>INDEX</code> scope is required. The operation will return a list of
<code>group_id</code>s that have access to the object.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="add-permissions-to-an-object">Add permissions to an object<a class="hash-link" href="#add-permissions-to-an-object" title="Direct link to heading">‚Äã</a></h2><p>To add a group to the permission list of an object, you need to call the
<code>authz.Encryptonize.AddPermission</code> endpoint. To access this endpoint the <code>OBJECTPERMISSIONS</code> scope
is required.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="remove-permissions-from-an-object">Remove permissions from an object<a class="hash-link" href="#remove-permissions-from-an-object" title="Direct link to heading">‚Äã</a></h2><p>To remove a group&#x27;s permission from an object, you need to call the
<code>authz.Encryptonize.RemovePermission</code> endpoint. To access this endpoint the <code>OBJECTPERMISSIONS</code>
scope is required.</p><h1>Version</h1><p>To get version information about the running encryption service, you need to call the
<code>app.Encryptonize.Version</code> endpoint. Currently, the endpoint returns the git commit hash and an
optional git tag. This endpoint does not need any scopes but requires the user to be authenticated
by presenting a valid access token.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/docker-hub/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Encryptonize¬Æ Core v3.2.0</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#keys-configs" class="table-of-contents__link toc-highlight">Keys configs</a></li><li><a href="#auth-storage-configs" class="table-of-contents__link toc-highlight">Auth storage configs</a></li><li><a href="#feature-flags-configs" class="table-of-contents__link toc-highlight">Feature flags configs</a></li><li><a href="#object-storage-configs" class="table-of-contents__link toc-highlight">Object storage configs</a></li><li><a href="#managing-users" class="table-of-contents__link toc-highlight">Managing Users</a><ul><li><a href="#bootstrapping-users" class="table-of-contents__link toc-highlight">Bootstrapping users</a></li><li><a href="#creating-users-through-the-api" class="table-of-contents__link toc-highlight">Creating users through the API</a></li><li><a href="#user-login" class="table-of-contents__link toc-highlight">User login</a></li><li><a href="#remove-user" class="table-of-contents__link toc-highlight">Remove user</a></li></ul></li><li><a href="#managing-groups" class="table-of-contents__link toc-highlight">Managing Groups</a><ul><li><a href="#creating-groups" class="table-of-contents__link toc-highlight">Creating groups</a></li><li><a href="#adding-and-removing-users" class="table-of-contents__link toc-highlight">Adding and removing users</a></li></ul></li><li><a href="#storing-data" class="table-of-contents__link toc-highlight">Storing data</a></li><li><a href="#retrieving-data" class="table-of-contents__link toc-highlight">Retrieving data</a></li><li><a href="#updating-data" class="table-of-contents__link toc-highlight">Updating data</a></li><li><a href="#deleting-data" class="table-of-contents__link toc-highlight">Deleting data</a></li><li><a href="#encryption" class="table-of-contents__link toc-highlight">Encryption</a></li><li><a href="#decryption" class="table-of-contents__link toc-highlight">Decryption</a></li><li><a href="#get-permissions-of-an-object" class="table-of-contents__link toc-highlight">Get permissions of an object</a></li><li><a href="#add-permissions-to-an-object" class="table-of-contents__link toc-highlight">Add permissions to an object</a></li><li><a href="#remove-permissions-from-an-object" class="table-of-contents__link toc-highlight">Remove permissions from an object</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.877ced0f.js"></script>
<script src="/assets/js/main.e03ae577.js"></script>
</body>
</html>