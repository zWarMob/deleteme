"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[756],{3905:function(e,t,r){r.d(t,{Zo:function(){return l},kt:function(){return h}});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=n.createContext({}),u=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},l=function(e){var t=u(e.components);return n.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),d=u(r),h=o,m=d["".concat(c,".").concat(h)]||d[h]||p[h]||a;return r?n.createElement(m,s(s({ref:t},l),{},{components:r})):n.createElement(m,s({ref:t},l))}));function h(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,s=new Array(a);s[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var u=2;u<a;u++)s[u]=r[u];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},3467:function(e,t,r){r.r(t),r.d(t,{assets:function(){return l},contentTitle:function(){return c},default:function(){return h},frontMatter:function(){return i},metadata:function(){return u},toc:function(){return p}});var n=r(7462),o=r(3366),a=(r(7294),r(3905)),s=["components"],i={},c="Functions",u={unversionedId:"API/Functions",id:"API/Functions",title:"Functions",description:"app",source:"@site/docs/API/Functions.md",sourceDirName:"API",slug:"/API/Functions",permalink:"/docs/API/Functions",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Error Handling",permalink:"/docs/API/Error Handling"},next:{title:"Health checks",permalink:"/docs/API/Health checks"}},l={},p=[{value:"<code>app</code>",id:"app",level:2},{value:"<code>app.Version</code>",id:"appversion",level:3},{value:"<code>storage</code>",id:"storage",level:2},{value:"<code>storage.Store</code>",id:"storagestore",level:3},{value:"<code>storage.Retrieve</code>",id:"storageretrieve",level:3},{value:"<code>storage.Update</code>",id:"storageupdate",level:3},{value:"<code>storage.Delete</code>",id:"storagedelete",level:3},{value:"<code>enc</code>",id:"enc",level:2},{value:"<code>enc.Encrypt</code>",id:"encencrypt",level:3},{value:"<code>enc.Decrypt</code>",id:"encdecrypt",level:3},{value:"<code>authn</code>",id:"authn",level:2},{value:"<code>authn.CreateUser</code>",id:"authncreateuser",level:3},{value:"<code>authn.LoginUser</code>",id:"authnloginuser",level:3},{value:"<code>authn.RemoveUser</code>",id:"authnremoveuser",level:3},{value:"<code>authnCreateGroup</code>",id:"authncreategroup",level:3},{value:"<code>authnAddUserToGroup</code>",id:"authnaddusertogroup",level:3},{value:"<code>authnRemoveUserFromGroup</code>",id:"authnremoveuserfromgroup",level:3},{value:"<code>authz</code>",id:"authz",level:2},{value:"<code>authz.GetPermissions</code>",id:"authzgetpermissions",level:3},{value:"<code>authz.AddPermission</code>",id:"authzaddpermission",level:3},{value:"<code>authz.RemovePermission</code>",id:"authzremovepermission",level:3}],d={toc:p};function h(e){var t=e.components,r=(0,o.Z)(e,s);return(0,a.kt)("wrapper",(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"functions"},"Functions"),(0,a.kt)("h2",{id:"app"},(0,a.kt)("inlineCode",{parentName:"h2"},"app")),(0,a.kt)("h3",{id:"appversion"},(0,a.kt)("inlineCode",{parentName:"h3"},"app.Version")),(0,a.kt)("p",null,"Gets the commit hash and tag (if exists) of the currently running service."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"rpc Version (VersionRequest) returns (VersionResponse)\n")),(0,a.kt)("h2",{id:"storage"},(0,a.kt)("inlineCode",{parentName:"h2"},"storage")),(0,a.kt)("h3",{id:"storagestore"},(0,a.kt)("inlineCode",{parentName:"h3"},"storage.Store")),(0,a.kt)("p",null,"Takes a ",(0,a.kt)("inlineCode",{parentName:"p"},"storage.StoreRequest")," and Stores its contents in encrypted form. This call can fail if the\nStorage Service cannot reach the object storage, in which case an error is returned."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"rpc Store (StoreRequest) returns (StoreResponse)\n")),(0,a.kt)("h3",{id:"storageretrieve"},(0,a.kt)("inlineCode",{parentName:"h3"},"storage.Retrieve")),(0,a.kt)("p",null,"Fetches a previously Stored object and returns the plaintext content. This call can fail if the\nspecified object does not exist, if the caller does not have access permission to that object, or if\nthe Storage Service cannot reach the object storage. In these cases, an error is returned."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"rpc Retrieve (RetriveRequest) returns (RetriveResponse)\n")),(0,a.kt)("h3",{id:"storageupdate"},(0,a.kt)("inlineCode",{parentName:"h3"},"storage.Update")),(0,a.kt)("p",null,"Takes a ",(0,a.kt)("inlineCode",{parentName:"p"},"storage.UpdateRequest")," and Stores it in encrypted form, replacing the data previously\nstored with the given Object ID. This call can fail if the specified Object ID does not currently\nexist, if the caller does not have access permission to that object, or if the Storage Service\ncannot reach the object storage. In these cases, an error is returned."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"DISCLAIMER: Current implementation of ",(0,a.kt)("inlineCode",{parentName:"p"},"storage.Update")," does not ensure safe concurrent access.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"rpc Update (UpdateRequest) returns (UpdateResponse)\n")),(0,a.kt)("h3",{id:"storagedelete"},(0,a.kt)("inlineCode",{parentName:"h3"},"storage.Delete")),(0,a.kt)("p",null,"Deletes a previously Stored object. This call does not fail if the specified object does not exist.\nIt can fail if the caller does not have access permission to that object or if the Storage Service\ncannot reach the object storage. In these cases, an error is returned."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"DISCLAIMER: Current implementation of ",(0,a.kt)("inlineCode",{parentName:"p"},"storage.Delete")," does not ensure safe concurrent access.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"rpc Delete (DeleteRequest) returns (DeleteResponse)\n")),(0,a.kt)("h2",{id:"enc"},(0,a.kt)("inlineCode",{parentName:"h2"},"enc")),(0,a.kt)("h3",{id:"encencrypt"},(0,a.kt)("inlineCode",{parentName:"h3"},"enc.Encrypt")),(0,a.kt)("p",null,"Takes an ",(0,a.kt)("inlineCode",{parentName:"p"},"enc.EncryptRequest")," and encrypts its contents returning the ciphertext ",(0,a.kt)("strong",{parentName:"p"},"without")," storing it."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"rpc Encrypt (EncryptRequest) returns (EncryptResponse) \n")),(0,a.kt)("h3",{id:"encdecrypt"},(0,a.kt)("inlineCode",{parentName:"h3"},"enc.Decrypt")),(0,a.kt)("p",null,"Takes a ",(0,a.kt)("inlineCode",{parentName:"p"},"enc.DecryptRequest"),", authorizes the user for access permissions and if accessible,\nreturns the decrypted content."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"rpc Decrypt (DecryptRequest) returns (DecryptResponse)\n")),(0,a.kt)("h2",{id:"authn"},(0,a.kt)("inlineCode",{parentName:"h2"},"authn")),(0,a.kt)("h3",{id:"authncreateuser"},(0,a.kt)("inlineCode",{parentName:"h3"},"authn.CreateUser")),(0,a.kt)("p",null,"Creates a new user. Also creates a group with the same ID as the user and the same scopes. The user\nis added to this group. This call can fail if the caller is lacking the required scope or if the\nAuth Service cannot reach the auth storage, in which case an error is returned."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"rpc CreateUser (CreateUserRequest) returns (CreateUserResponse)\n")),(0,a.kt)("h3",{id:"authnloginuser"},(0,a.kt)("inlineCode",{parentName:"h3"},"authn.LoginUser")),(0,a.kt)("p",null,"Logs in an existing user, returning a User Access Token. Note that this token is valid for 1 hour.\nThis call can fail if the caller provides the wrong credentials or if the Auth Service cannot reach\nthe auth storage, in which case an error is returned."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"rpc LoginUser (LoginUserRequest) returns (LoginUserResponse)\n")),(0,a.kt)("h3",{id:"authnremoveuser"},(0,a.kt)("inlineCode",{parentName:"h3"},"authn.RemoveUser")),(0,a.kt)("p",null,"Deletes an existing user. This call can fail if the caller is lacking the required scope, if the\nuser does not exist, or if the Auth Service cannot reach the auth storage, in which case an error is\nreturned."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"rpc RemoveUser (RemoveUserRequest) returns (RemoveUserResponse)\n")),(0,a.kt)("h3",{id:"authncreategroup"},(0,a.kt)("inlineCode",{parentName:"h3"},"authnCreateGroup")),(0,a.kt)("p",null,"Creates a new group. This call can fail if the caller is lacking the required scope or if the Auth\nService cannot reach the auth storage, in which case an error is returned."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"rpc CreateGroup (CreateGroupRequest) returns (CreateGroupResponse)\n")),(0,a.kt)("h3",{id:"authnaddusertogroup"},(0,a.kt)("inlineCode",{parentName:"h3"},"authnAddUserToGroup")),(0,a.kt)("p",null,"Adds a user to a group. This call can fail if the caller is lacking the required scope or if the\nAuth Service cannot reach the auth storage, in which case an error is returned."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"rpc AddUserToGroup (AddUserToGroupRequest) returns (AddUserToGroupResponse)\n")),(0,a.kt)("h3",{id:"authnremoveuserfromgroup"},(0,a.kt)("inlineCode",{parentName:"h3"},"authnRemoveUserFromGroup")),(0,a.kt)("p",null,"Removes a user from a group. This call can fail if the caller is lacking the required scope or if\nthe Auth Service cannot reach the auth storage, in which case an error is returned."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"rpc RemoveUserFromGroup (RemoveUserFromGroupRequest) returns (RemoveUserFromGroupResponse)\n")),(0,a.kt)("h2",{id:"authz"},(0,a.kt)("inlineCode",{parentName:"h2"},"authz")),(0,a.kt)("h3",{id:"authzgetpermissions"},(0,a.kt)("inlineCode",{parentName:"h3"},"authz.GetPermissions")),(0,a.kt)("p",null,"Returns a list of groups with access to the specified object. This call can fail if the Storage\nService cannot reach the auth storage, in which case an error is returned. The calling user has to\nbe authenticated and authorized to access the object in order to get the object permissions."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"rpc GetPermissions (GetPermissionsRequest) returns (GetPermissionsResponse)\n")),(0,a.kt)("h3",{id:"authzaddpermission"},(0,a.kt)("inlineCode",{parentName:"h3"},"authz.AddPermission")),(0,a.kt)("p",null,"Adds a group to the access list of the specified object. This call can fail if the caller does not\nhave access to the object, if the target group does not exist, or if the Storage Service cannot\nreach the auth storage. In these cases, an error is returned."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"rpc AddPermission (AddPermissionRequest) returns (ReturnCode)\n")),(0,a.kt)("h3",{id:"authzremovepermission"},(0,a.kt)("inlineCode",{parentName:"h3"},"authz.RemovePermission")),(0,a.kt)("p",null,"Removes a group from the access list of the specified object. This call can fail if the caller does\nnot have access to the object or if the Storage Service cannot reach the auth storage. In these\ncases, an error is returned."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"rpc RemovePermission (RemovePermissionRequest) returns (ReturnCode)\n")))}h.isMDXComponent=!0}}]);